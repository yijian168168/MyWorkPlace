<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

    <constant name="struts.enable.DynamicMethodInvocation" value="false"/>
    <constant name="struts.devMode" value="true"/>

    <!--
    功能：
    1.根据请求地址找到相应的Action处理方法，并返回成功页面
    -->
    <package name="package1" namespace="/package1" extends="struts-default">
        <!--
            默认的action,如果找不到对应的 action，默认的 action 将处理请求
        -->
        <default-action-ref name="default"/>

        <!--
        全局结果
        如果在局部结果中找到 结果，则按局部结果处理。如果在局部结果中找不到结果，则在全局结果中找对应的结果
        -->
        <global-results>
            <result name="error">/WEB-INF/view/error.jsp</result>
        </global-results>

        <action name="default">
            <result>/WEB-INF/view/error.jsp</result>
        </action>
        <!--
        直接配置请求.
        -->
        <action name="action1" class="com.package1.Action1" method="method1">
            <result name="success">/WEB-INF/view/success.jsp</result>
        </action>

        <!--
        使用占位符映射请求.
        第一个 * 对应 {1}，第二个 * 对应 {2}，以此类推
        -->
        <action name="action*" class="com.package1.Action1" method="method{1}">
            <result name="success">/WEB-INF/view/success.jsp</result>
        </action>

        <!--
        <result>标签中的 type 属性
        chain: Action链式处理的结果类型
        dispatcher:转发，指定使用JSP作为视图的结果类型
        freemarker:用于指定使用FreeMarker模板作为视图的结果类型
        httpheader:用于控制特殊的HTTP行为的结果类型
        redirect:重定向，用于直接跳转到其他URL的结果类型。
                不能重定向到 /WEB-INF/ 路径下的任何资源，因为重定向就相当于重新发起了一次请求
        redirectAction:用于直接跳转到其他Action的结果类型
                <result type="redirectAction">
                    <param name="namespace" >/package1</param> //重定向的命名空间
                    <param name="actionName" >action2</param>  //重定向的action
                </result>
        stream:用于向浏览器返回一个InputStream（一般用于文件下载）
        velocity:用于指定使用Velocity模板作为视图的结果类型
        xslt:用于与xml/xslt整合的结果类型
        plainText:用于显示某个页面的原始代码的结果类型
        -->
    </package>

    <package name="package2" namespace="/exception" extends="struts-default">

        <global-results>
            <result name="Exception">/WEB-INF/view/error.jsp</result>
        </global-results>

        <!--
        声明式异常分为“全局异常映射”和“局部异常映射”
        -->
        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="Exception" />
        </global-exception-mappings>
        <action name="action2*" class="com.package2.Action21" method="method2{1}">
            <exception-mapping exception="java.lang.NullPointerException" result="NullPointerException"/>
            <result name="NullPointerException">/WEB-INF/view/NullPointerException.jsp</result>
            <result >/WEB-INF/view/success.jsp</result>
        </action>
    </package>


    <!-- <package name="package2" namespace="/interceptors" extends="struts-default">

         &lt;!&ndash; 定义新的拦截器栈, 配置 prepare 拦截器栈的 alwaysInvokePrepare 参数值为 false &ndash;&gt;
         <interceptors>
             <interceptor-stack name="sshStack">
                 <interceptor-ref name="paramsPrepareParamsStack">
                     <param name="prepare.alwaysInvokePrepare">false</param>
                 </interceptor-ref>
             </interceptor-stack>
         </interceptors>

         &lt;!&ndash; 使用新的拦截器栈 &ndash;&gt;
         <default-interceptor-ref name="sshStack"/>

         <action name="emp-*" class="employeeAction"
                 method="{1}">
             <result name="list">/WEB-INF/views/emp-list.jsp</result>
             <result type="stream" name="ajax-success">
                 <param name="contentType">text/html</param>
                 <param name="inputName">inputStream</param>
             </result>
             <result name="input">/WEB-INF/views/emp-input.jsp</result>
             <result name="success" type="redirect">/emp-list</result>
         </action>

     </package>-->

</struts>
